<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>strusModule: strusModule</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">strusModule
   &#160;<span id="projectnumber">0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">strusModule </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The project strusModule provides a module loader a mechanism to load strus core or anaylzer objects from dynamically loadable modules. With strusModule functions and objects can be added to strus without modification of the original source code. You can create your own project for these extensions and build and deploy them separately.</p>
<h2>Types of extensions </h2>
<p>With strusModule you can define two classes of loadable modules:</p>
<ol type="1">
<li><a class="el" href="structstrus_1_1StorageModule.html">storage module</a></li>
<li><a class="el" href="structstrus_1_1AnalyzerModule.html">analyzer module</a></li>
</ol>
<h2>How to implement a storage module </h2>
<p>In a storage module you write extensions of the following type</p>
<ul>
<li>postings join operations (PostingJoinOperatorInterface)</li>
<li>weighting functions (WeightingFunctionInterface)</li>
<li>summarization functions (SummarizerFunctionInterface)</li>
</ul>
<p>The following example shows a storage module template. It includes the main header file "strus/strus.hpp" with all strus core and analyzer declarations. For better built times it is recommended to include the needed headers separately instead of including them all by including "strus/strus.hpp". All parameters of the <a class="el" href="structstrus_1_1StorageModule.html" title="Structure that contains all storage module objects. ">strus::StorageModule</a> object that declares the module entry point are optional. You can pass 0, if no object of the parameter type is declared in the module.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="strus_8hpp.html">strus/strus.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;strus/private/dll_tags.hpp&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/*--- Posting join operators */</span></div>
<div class="line"><span class="keyword">class </span>DummyJoinOperator</div>
<div class="line">        :<span class="keyword">public</span> strus::PostingJoinOperatorInterface</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">        ... Implement the posting join <span class="keyword">operator</span> <span class="keyword">interface </span>here ...</div>
<div class="line">private:</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line">const strus::PostingJoinOperatorInterface* dummy_join()</div>
<div class="line">{</div>
<div class="line">        <span class="keyword">static</span> <span class="keyword">const</span> DummyJoinOperator dummy_join_obj;</div>
<div class="line">        <span class="keywordflow">return</span> &amp;dummy_join_obj;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structstrus_1_1PostingIteratorJoinConstructor.html">strus::PostingIteratorJoinConstructor</a> postingJoinOperators[] =</div>
<div class="line">{</div>
<div class="line">        {<span class="stringliteral">&quot;dummy_join&quot;</span>, dummy_join},</div>
<div class="line">        {0,0}</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">/*--- Weighting functions */</span></div>
<div class="line"><span class="keyword">class </span>DummyWeightingFunction</div>
<div class="line">        :<span class="keyword">public</span> strus::WeightingFunctionInterface</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">        ... Implement the weighting <span class="keyword">function</span> <span class="keyword">interface </span>here ...</div>
<div class="line">private:</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line">const strus::WeightingFunctionInterface* dummy_weighting()</div>
<div class="line">{</div>
<div class="line">        <span class="keyword">static</span> <span class="keyword">const</span> DummyWeightingFunction dummy_weighting_obj;</div>
<div class="line">        <span class="keywordflow">return</span> &amp;dummy_weighting_obj;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structstrus_1_1WeightingFunctionConstructor.html">strus::WeightingFunctionConstructor</a> weightingFunctions[] =</div>
<div class="line">{</div>
<div class="line">        {<span class="stringliteral">&quot;dummy_weighting&quot;</span>, dummy_weighting},</div>
<div class="line">        {0,0}</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*--- Summarizer functions */</span></div>
<div class="line"><span class="keyword">class </span>DummySummarizerFunction</div>
<div class="line">        :<span class="keyword">public</span> strus::SummarizerFunctionInterface</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">        ... Implement the summarizer <span class="keyword">function</span> <span class="keyword">interface </span>here ...</div>
<div class="line">private:</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line">const strus::SummarizerFunctionInterface* dummy_summarizer()</div>
<div class="line">{</div>
<div class="line">        <span class="keyword">static</span> <span class="keyword">const</span> DummySummarizerFunction dummy_summarizer_obj;</div>
<div class="line">        <span class="keywordflow">return</span> &amp;dummy_summarizer_obj;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structstrus_1_1SummarizerFunctionConstructor.html">strus::SummarizerFunctionConstructor</a> summarizerFunctions[] =</div>
<div class="line">{</div>
<div class="line">        {<span class="stringliteral">&quot;dummy_summarizer&quot;</span>, dummy_summarizer},</div>
<div class="line">        {0,0}</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*--- Module declaration */</span></div>
<div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> DLL_PUBLIC <a class="code" href="structstrus_1_1StorageModule.html">strus::StorageModule</a> entryPoint;</div>
<div class="line"></div>
<div class="line"><a class="code" href="structstrus_1_1StorageModule.html">strus::StorageModule</a> entryPoint( postingJoinOperators, weightingFunctions, summarizerFunctions);</div>
</div><!-- fragment --><h2>How to implement an analyzer module </h2>
<p>In an analyzer module you write extensions of the following type</p>
<ul>
<li>document segmentation (SegmenterInterface)</li>
<li>segment tokenization (TokenizerFunctionInterface)</li>
<li>token normalization (NormalizerFunctionInterface)</li>
</ul>
<p>The following examples show two analyzer module templates. Both include the main header file "strus/strus.hpp" with all strus core and analyzer declarations. For better built times it is recommended to include the needed headers separately instead of including them all by including "strus/strus.hpp". All parameters of the <a class="el" href="structstrus_1_1AnalyzerModule.html" title="Structure that contains all analyzer module objects. ">strus::AnalyzerModule</a> object that declares the module entry point are optional. You can pass 0 for arrays, if no object of the parameter type is declared in the module and you can ommit the segmenter argument, if no segmenter is declared.</p>
<p>The first example shows a dummy analyzer module implementing a tokenizer and a normalizer: </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="strus_8hpp.html">strus/strus.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;strus/private/dll_tags.hpp&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/*--- Tokenizer functions */</span></div>
<div class="line"><span class="keyword">class </span>DummyTokenizerFunction</div>
<div class="line">        :<span class="keyword">public</span> strus::TokenizerFunctionInterface</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">        ... Implement the tokenizer <span class="keyword">function</span> <span class="keyword">interface </span>here ...</div>
<div class="line">private:</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line">const strus::TokenizerFunctionInterface* dummy_tokenizer()</div>
<div class="line">{</div>
<div class="line">        <span class="keyword">static</span> <span class="keyword">const</span> DummyTokenizerFunction dummy_tokenizer_obj;</div>
<div class="line">        <span class="keywordflow">return</span> &amp;dummy_tokenizer_obj;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structstrus_1_1TokenizerConstructor.html">strus::TokenizerConstructor</a> tokenizers[] =</div>
<div class="line">{</div>
<div class="line">        {<span class="stringliteral">&quot;dummy_tokenizer&quot;</span>, dummy_tokenizer},</div>
<div class="line">        {0,0}</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*--- Normalizer functions */</span></div>
<div class="line"><span class="keyword">class </span>DummyNormalizerFunction</div>
<div class="line">        :<span class="keyword">public</span> strus::NormalizerFunctionInterface</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">        ... Implement the normalizer <span class="keyword">function</span> <span class="keyword">interface </span>here ...</div>
<div class="line">private:</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line">const strus::NormalizerFunctionInterface* dummy_normalizer()</div>
<div class="line">{</div>
<div class="line">        <span class="keyword">static</span> <span class="keyword">const</span> DummyNormalizerFunction dummy_normalizer_obj;</div>
<div class="line">        <span class="keywordflow">return</span> &amp;dummy_normalizer_obj;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structstrus_1_1NormalizerConstructor.html">strus::NormalizerConstructor</a> normalizers[] =</div>
<div class="line">{</div>
<div class="line">        {<span class="stringliteral">&quot;dummy_normalizer&quot;</span>, dummy_normalizer},</div>
<div class="line">        {0,0}</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*--- Module declaration */</span></div>
<div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> DLL_PUBLIC <a class="code" href="structstrus_1_1AnalyzerModule.html">strus::AnalyzerModule</a> entryPoint;</div>
<div class="line"></div>
<div class="line"><a class="code" href="structstrus_1_1AnalyzerModule.html">strus::AnalyzerModule</a> entryPoint( tokenizers, normalizers);</div>
</div><!-- fragment --><p>The next example shows another analyzer module template for implementing a document segmenter. </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="strus_8hpp.html">strus/strus.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;strus/private/dll_tags.hpp&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/*--- Document segmenter */</span></div>
<div class="line"><span class="keyword">class </span>DummySegmenter</div>
<div class="line">        :<span class="keyword">public</span> strus::SegmenterInterface</div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">        ... Implement the segmenter <span class="keyword">interface </span>here ...</div>
<div class="line">private:</div>
<div class="line">};      </div>
<div class="line"></div>
<div class="line">const strus::SegmenterInterface* dummy_segmenter()</div>
<div class="line">{</div>
<div class="line">        <span class="keyword">static</span> <span class="keyword">const</span> DummySegmenter dummy_segmenter_obj;</div>
<div class="line">        <span class="keywordflow">return</span> &amp;dummy_segmenter_obj;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="structstrus_1_1SegmenterConstructor.html">strus::SegmenterConstructor</a> segmenter =</div>
<div class="line">{</div>
<div class="line">        <span class="stringliteral">&quot;dummy_segmenter&quot;</span>, dummy_segmenter</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/*--- Module declaration */</span></div>
<div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> DLL_PUBLIC <a class="code" href="structstrus_1_1AnalyzerModule.html">strus::AnalyzerModule</a> entryPoint;</div>
<div class="line"></div>
<div class="line"><a class="code" href="structstrus_1_1AnalyzerModule.html">strus::AnalyzerModule</a> entryPoint( segmenter, 0, 0);</div>
</div><!-- fragment --><h2>How to use loadable extensions </h2>
<p>The strus <a class="el" href="classstrus_1_1ModuleLoaderInterface.html">module loader interface</a> is constructed by calling the createModuleLoader function implemented in the strus_module library. The module loader allows you to load modules one by one. After loading all modules you can construct the objects needed for your strus project. The module loader provides you two objects to do this, the StorageObjectBuilderInterface and the AnalyzerObjectBuilderInterface. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 7 2015 17:06:58 for strusModule by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
